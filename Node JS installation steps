dnf module disable nodejs -y    #Disable current module
dnf module enable nodejs:20 -y  #Enable required module
dnf install nodejs -y  #Install Node JS
dnf update -y openssh openssh-server openssh-clients  #Update openssl packages too not break SSH login
useradd --system --home /app --shell /sbin/nologin --comment "roboshop system user" roboshop  #refer line no 6
mkdir /app #refer line no 7
curl -o /tmp/catalogue.zip https://roboshop-artifacts.s3.amazonaws.com/catalogue-v3.zip #curl -o save the output to the file. This downloads the webpage and saves it as catalouge.zip. If I provide -O it saves output with same name in URL.
cd /app 
unzip /tmp/catalogue.zip
npm install //npm install dependecies or libraries
vim /etc/systemd/system/catalogue.service
    [Unit]
    Description = Catalogue Service
    
    [Service]
    User=roboshop
    Environment=MONGO=true
    // highlight-start
    Environment=MONGO_URL="mongodb://<MONGODB-SERVER-IPADDRESS>:27017/catalogue" #mondodb is a protocol like http
    // highlight-end
    ExecStart=/bin/node /app/server.js
    SyslogIdentifier=catalogue
    
    [Install]
    WantedBy=multi-user.target
replace <MONGODB-SERVER-IPADDRESS> with IP address
systemctl daemon-reload #refer line no 9
systemctl enable catalogue 
systemctl start catalogue
netstat -lntp
systemctl status catalouge
ps -ef | grep node
telnet mongodb.daws88s.online
curl http://localhost:8080/health
Edit vim /etc/yum.repos.d/mongo.repo file to install mongodb. 
	[mongodb-org-7.0]
	name=MongoDB Repository
	baseurl=https://repo.mongodb.org/yum/redhat/9/mongodb-org/7.0/x86_64/
	enabled=1
	gpgcheck=0
dnf install mongodb-mongosh -y  #It is the official MongoDB command-line shell.It allows you to Connect to MongoDB,Run queries,Load schema files,Insert data.
cat /app/db/master-data.js
mongosh --host MONGODB-SERVER-IPADDRESS </app/db/master-data.js #Load Master Data of the List of products we want to sell and their quantity information also there in the same master data.



LOGS CHECK: /var/log or journalctl -u catalouge command
-----------------------------------------------------------------------------------
1. Backend service is responsible for adding the given values to database. Backend service is written in NodeJS, Hence we need to install NodeJS.
2. Catalogue is a microservice that is responsible for serving the list of items that displays in roboshop application.
3. Developer has chosen NodeJs, Check with developer which version of NodeJS is needed. Developer has set a context that it can work with NodeJS >20
4. Install NodeJS, By default NodeJS 16 is available, We would like to enable 20 version and install list.
5. You can list modules by using : dnf module list nodejs
6. useradd --system --home /app --shell /sbin/nologin --comment "roboshop system user" roboshop 
   System user creation is not mandatory but it's stronglt recommended for production deployments. We can run Node JS as root user or existing user also.
   But using a system user gives several security, safety, and management advantages.
   If your Node.js application gets compromised while running as root, the attacker immediately gets full root access.
   But app runs as a limited system user, attacker can't delete system files,can't shut down services,cannot install packages,has limited permissions
   A system user: 1. has no login shell 2. cannot SSH 3. cannot run system commands 4. only owns the app files 5. is restricted to that one service  and avoid accidental deletion, permission issues, random users modifying files.
   # useradd command is to create new user # -- system mean Create a system user (service account), not a normal login user which has UID<1000. # --home /app mean Set /app as the home directory for this user.
   # --shell /sbin/nologin mean don't allow this user to log in via SSH or shell. /sbin/nologin prevents the user from accessing a normal shell. # normal users have /bin/bash or /bin/sh
   # Apart from running application, system user can't perform any running of commands like ls, cat, yum, systemctl, cp
7. create app directory in root / directory. when i do ls / then we get bin  boot  dev  etc  home  opt  usr  var  app . If you want to create under user directory it's mkdir app /home/username/app
   mkdir -p /app mean If app folder already exists, -p won't throw an error. It creates if folder is not present and also it creates parent directories/folders if not there.
8. Service tells systemd how to run application.
	User=roboshop====>Run the service as the user named roboshop not as root for saftey
	Environment=MONGO_URL="mongodb://<MONGODB-SERVER-IPADDRESS>:27017/catalogue"  Set an environment variable called MONGO_URL that your Node.js app can read.(It stores the MongoDB server IP address.)
	ExecStart= /bin/node /app/index.js //This is the actual command systemd will run. Run Node.js and start your backend application.
	SyslogIdentifier=catalogue //When logs go to the system logs (journalctl), they will be tagged as catalogue.
	 [Install] ==> This section tells systemd when this service should start automatically.
	[Install]
		WantedBy=multi-user.target
	Start this service automatically on boot when the system enters normal operating mode (multi user mode).
//restart vs reload
	restart: Stops the service ; Starts it again from scratch mean your application is fully restarted and Any updated files or environment variables take effect.
	reload: Does not stop the service; Asks the service to reload configuration while running. 
	nginx reload reloads config without downtime.Node apps generally must be restarted (no reload)
//enable vs start
    start : Starts the service now; Does not make it start automatically on reboot
    enable: Make sure this service starts automatically every time the system boots.” ✔ What it does: Creates symlinks in systemd and Makes service start on next reboot
9.  command used in Linux to tell systemd to reload its configuration file.
	When you create or edit a service file, systemd doesn’t automatically know that the file has changed. 
	systemctl daemon-reload tells systemd: “Hey systemd, I changed some service files — please re-read them.” 
	Why It’s Needed Systemd keeps a cached copy of all service files in memory. If you modify a service file and don’t run daemon-reload, systemd will keep using the old version, and your changes won't take effect. 
	When You Should Use It You must run: sudo systemctl daemon-reload whenever you: ✔️ Create a new service file ✔️ Modify an existing service file ✔️ Add/remove environment variables in the service ✔️ Change ExecStart command ✔️ Change permissions, user, or path After reloading, you usually run: sudo systemctl restart <service-name> to apply new changes.

